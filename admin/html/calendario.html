<!DOCTYPE html>
<html
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="assets/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Cancun Cab Transportation Admin</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />

    <link rel="stylesheet" href="../assets/css/style.css"/>

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="../assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../assets/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="../admin.html">
              <img style="
              width: 220px;" src="../assets/img/cancun-cab-transportation-logo.png"/>
            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboard -->
            <li class="menu-item ">
              <a href="../admin.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-home-circle"></i>
                <div data-i18n="Analytics">Inicio</div>
              </a>
            </li>

            <!-- Reservas -->
            <li class="menu-item">
              <a href="reservas.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-bookmarks"></i>
                <div data-i18n="Analytics">Reservas</div>
              </a>
            </li>

            <!-- Calendario -->
            <li class="menu-item active">
              <a href="calendario.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-calendar'></i>
                <div data-i18n="Analytics">Calendario</div>
              </a>
            </li>

            <!-- Tarifas -->
            <li class="menu-item">
              <a href="pages-misc-under-maintenance.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-money'></i>
                <div data-i18n="Analytics">Tarifas</div>
              </a>
            </li>

            <!-- Lugares -->
            <li class="menu-item">
              <a href="lugares.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-map'></i>
                <div data-i18n="Analytics">Lugares</div>
              </a>
            </li>
            
            <!-- Zonas -->
            <li class="menu-item">
              <a href="zonas.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-map-alt'></i>
                <div data-i18n="Analytics">Zonas</div>
              </a>
            </li>

            <!-- Paquetes -->
            <li class="menu-item">
              <a href="paquetes.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-car'></i>
                <div data-i18n="Analytics">Paquetes</div>
              </a>
            </li>

            <!-- Tipos -->
            <li class="menu-item">
              <a href="tipos.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-right-arrow-alt'></i>
                <div data-i18n="Analytics">Tipos</div>
              </a>
            </li>

            <!-- Correos -->
            <li class="menu-item">
              <a href="pages-misc-under-maintenance.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-envelope'></i>
                <div data-i18n="Analytics">Correos</div>
              </a>
            </li>

            <!-- Usuarios -->
            <li class="menu-item">
              <a href="pages-misc-under-maintenance.html" class="menu-link">
                <i class='menu-icon tf-icons bx bx-user'></i>
                <div data-i18n="Analytics">Usuarios</div>
              </a>
            </li>            

          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              <!-- Search -->
              <div class="navbar-nav align-items-center">
                <div class="nav-item d-flex align-items-center">
                  <i class="bx bx-search fs-4 lh-0"></i>
                  <input
                    type="text"
                    class="form-control border-0 shadow-none"
                    placeholder="Search..."
                    aria-label="Search..."
                  />
                </div>
              </div>
              <!-- /Search -->

              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <!-- Place this tag where you want the button to render. -->


                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <div class="avatar avatar-online">
                      <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                    </div>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    <li>
                      <a class="dropdown-item" href="#">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <img src="../assets/img/avatars/1.png" alt class="w-px-40 h-auto rounded-circle" />
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block">John Doe</span>
                            <small class="text-muted">Admin</small>
                          </div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <i class="bx bx-user me-2"></i>
                        <span class="align-middle">My Profile</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <i class="bx bx-cog me-2"></i>
                        <span class="align-middle">Settings</span>
                      </a>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <span class="d-flex align-items-center align-middle">
                          <i class="flex-shrink-0 bx bx-credit-card me-2"></i>
                          <span class="flex-grow-1 align-middle">Billing</span>
                          <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">4</span>
                        </span>
                      </a>
                    </li>
                    <li>
                      <div class="dropdown-divider"></div>
                    </li>
                    <li>
                      <a class="dropdown-item" href="#">
                        <i class="bx bx-power-off me-2"></i>
                        <span class="align-middle">Log Out</span>
                      </a>
                    </li>
                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Modals -->
            <div class="modal fade" id="largeModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel3">Reservas</h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                        <!-- <h1>Hola papi bello eres muy bueno la puta madre</h1> -->
                    </div>
                  </div>
                </div>
            </div>
            <div class="my-wrapper">
                <div class="calendar">
                    <div class="calendar-header">
                        <span class="month-picker" id="month-picker">April</span>
                        <div class="year-picker">
                            <span class="year-change" id="prev-year">
                                <pre><</pre>
                            </span>
                            <span id="year">2022</span>
                            <span class="year-change" id="next-year">
                                <pre>></pre>
                            </span>
                        </div>
                    </div>
                    <div class="calendar-body">
                        <div class="calendar-week-day">
                            <div>Dom</div>
                            <div>Lun</div>
                            <div>Mar</div>
                            <div>Mie</div>
                            <div>Jue</div>
                            <div>Vie</div>
                            <div>Sab</div>
                        </div>
                        <div class="calendar-days"></div>
                    </div>
                   
                    <div class="month-list"></div>
                </div>
                <script>
                    let calendar = document.querySelector('.calendar')

                    if (calendar != null){
                    const month_names = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']

                    isLeapYear = (year) => {
                        return (year % 4 === 0 && year % 100 !== 0 && year % 400 !== 0) || (year % 100 === 0 && year % 400 ===0)
                    }

                    getFebDays = (year) => {
                        return isLeapYear(year) ? 29 : 28
                    }

                    generateCalendar = (month, year) => {

                        let calendar_days = calendar.querySelector('.calendar-days')
                        let calendar_header_year = calendar.querySelector('#year')

                        let days_of_month = [31, getFebDays(year), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

                        calendar_days.innerHTML = ''

                        let currDate = new Date()
                        if (month > 11 || month < 0) month = currDate.getMonth()
                        if (!year) year = currDate.getFullYear()

                        let curr_month = `${month_names[month]}`
                        month_picker.innerHTML = curr_month
                        calendar_header_year.innerHTML = year

                        // get first day of month
                        
                        let first_day = new Date(year, month, 1)

                        for (let i = 0; i <= days_of_month[month] + first_day.getDay() - 1; i++) {
                            let day = document.createElement('div')
                            if (i >= first_day.getDay()) {
                                day.classList.add('calendar-day-hover')
                                day.setAttribute('data-bs-toggle', 'modal')
                                day.setAttribute('data-bs-target', '#largeModal')
                                day.setAttribute('data-whatever', `${i - first_day.getDay() + 1}-${month+1}-${year}`)
                                day.innerHTML = i - first_day.getDay() + 1
                                day.innerHTML += `<span></span>
                                                <span></span>
                                                <span></span>
                                                <span></span>`
                                if (i - first_day.getDay() + 1 === currDate.getDate() && year === currDate.getFullYear() && month === currDate.getMonth()) {
                                    day.classList.add('curr-date')
                                }
                            }
                            calendar_days.appendChild(day)
                        }
                    }

                    let month_list = calendar.querySelector('.month-list');
                    /* Delete the last 12 entries in month_names */
                    month_names.forEach((e, index) => {  
                    let month = document.createElement('div')
                        month.innerHTML = `<div data-month="${index}">${e}</div>`
                        month.querySelector('div').onclick = () => {
                            month_list.classList.remove('show')
                            curr_month.value = index
                            generateCalendar(index, curr_year.value)
                        }
                        month_list.appendChild(month)
                    })

                    let month_picker = calendar.querySelector('#month-picker')

                    month_picker.onclick = () => {
                        month_list.classList.add('show')
                    }

                    let currDate = new Date()

                    let curr_month = {value: currDate.getMonth()}
                    let curr_year = {value: currDate.getFullYear()}

                    generateCalendar(curr_month.value, curr_year.value)

                    document.querySelector('#prev-year').onclick = () => {
                        --curr_year.value
                        generateCalendar(curr_month.value, curr_year.value)
                    }

                    document.querySelector('#next-year').onclick = () => {
                        ++curr_year.value
                        generateCalendar(curr_month.value, curr_year.value)
                    }
                    }
                </script>
                <script>
                    // Get the modal element
                    const modal = document.getElementById('largeModal');

                    // Get the modal title and body elements
                    const modalTitle = modal.querySelector('.modal-title');
                    const modalBody = modal.querySelector('.modal-body');

                    // Get all the buttons that toggle the modal

                    // Add click event listener to all calendar day hover elements
                    const calendarDayHovers = document.querySelectorAll(".calendar-day-hover");
                    calendarDayHovers.forEach((day) => {
                    day.addEventListener("click", () => {
                        const selectedDates = [];
                        const date = day.getAttribute("data-whatever");

                        // Add the selected date to the array of selected dates
                        selectedDates.push(date);

                        // Clear the modal body
                        modalBody.innerHTML = "";
                        // reemplazar este for cochino con un php que traiga la informacion correcta segun la fecha que viene desde data-whatever
                        selectedDates.forEach((date) => {
                        const h1 = document.createElement("h5");
                        h1.textContent = "Reservas para la fecha: "+date;
                        modalBody.appendChild(h1);
                        const table = document.createElement("table");
                        table.classList.add("table");
                        table.classList.add("table-striped");
                        table.classList.add("table-bordered");
                        table.classList.add("table-hover");
                        table.classList.add("table-sm");
                        table.classList.add("table-responsive");
                        
                        const thead = document.createElement("thead");
                        const tr = document.createElement("tr");
                        const th = document.createElement("th");
                        th.setAttribute("scope", "col");
                        th.textContent = "Fecha Ida";
                        tr.appendChild(th);
                        const th2 = document.createElement("th");
                        th2.setAttribute("scope", "col");
                        th2.textContent = "Cliente";
                        tr.appendChild(th2);
                        const th3 = document.createElement("th");
                        th3.setAttribute("scope", "col");
                        th3.textContent = "Precio";
                        tr.appendChild(th3);
                        const th4 = document.createElement("th");
                        th4.setAttribute("scope", "col");
                        th4.textContent = "Paquete";
                        tr.appendChild(th4);
                        const th5 = document.createElement("th");
                        th5.setAttribute("scope", "col");
                        th5.textContent = "Precio";
                        const th6 = document.createElement("th");
                        th6.setAttribute("scope", "col");
                        th6.textContent = "Estado";
                        tr.appendChild(th6);
                        tr.appendChild(th5);
                        thead.appendChild(tr);
                        table.appendChild(thead);
                        //Juan Pérez	Ciudad de México	Cancún	Todo incluido	Paquete 1	04/01/2023	04/05/2023	8000	Activa
                        const tbody = document.createElement("tbody");
                        const tr2 = document.createElement("tr");
                        const td = document.createElement("td");
                        td.textContent = "04/01/2023";
                        tr2.appendChild(td);
                        const td2 = document.createElement("td");
                        td2.textContent = "Juan Pérez";
                        tr2.appendChild(td2);
                        const td3 = document.createElement("td");
                        td3.textContent = "8000";
                        tr2.appendChild(td3);
                        const td4 = document.createElement("td");
                        td4.textContent = "Paquete 1";
                        tr2.appendChild(td4);
                        const td5 = document.createElement("td");
                        td5.textContent = "8000";
                        tr2.appendChild(td5);
                        const td6 = document.createElement("td");
                        const span = document.createElement("span");
                        //badge bg-label-primary me-1
                        span.classList.add("badge");
                        span.classList.add("bg-label-primary");
                        span.classList.add("me-1");
                        span.textContent = "Activa";
                        td6.appendChild(span);
                        tr2.appendChild(td6);
                        tbody.appendChild(tr2);
                        table.appendChild(tbody);
                        modalBody.appendChild(table);
                        });
                    });
                    });
                </script>
            </div>

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->



    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="../assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script>

    <!-- Main JS -->
    <script src="../assets/js/main.js"></script>

    <!-- Page JS -->
    <script src="../assets/js/dashboards-analytics.js"></script>

    <!-- Helper for php -->
    <script src="../js/index.js"></script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </body>
</html>
